{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const galleryTemplate = imgInfo => {\n  return `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${imgInfo.webformatURL}\"\n          data-source=\"${imgInfo.largeImageURL}\"\n          alt=\"${imgInfo.tags}\"\n        />\n      </a>\n      <div class=\"wrapper\">\n        <ul class=\"img-content-wrapper\">\n          <li class=\"text-info\">\n            Likes<span class=\"number\">${imgInfo.likes}</span>\n          </li>\n          <li class=\"text-info\">\n            Views<span class=\"number\">${imgInfo.views}</span>\n          </li>\n          <li class=\"text-info\">\n            Comments<span class=\"number\">${imgInfo.comments}</span>\n          </li>\n          <li class=\"text-info\">\n            Downloads<span class=\"number\">${imgInfo.downloads}</span>\n          </li>\n        </ul>\n      </div>\n    </li>\n    `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page) => {\n  const axiosOptions = {\n    params: {\n      key: '45714704-c3295be315f324c1eb86e3dfd',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  };\n\n  return axios.get('', axiosOptions);\n};\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nimport { galleryTemplate } from './js/render-functions';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nconst simpleLightbox = new SimpleLightbox('.js-gallery a', {\n  overlayOpacity: 0.9,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 350,\n});\n\nlet currentPage = 1;\nlet userValue = '';\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    userValue = searchFormEl.elements.user_query.value.trim();\n\n    currentPage = 1;\n\n    if (!userValue) {\n      iziToast.warning({\n        message: 'Input field must not be empty.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    galleryEl.innerHTML = '';\n\n    loader.classList.remove('is-hidden');\n\n    const response = await fetchPhotos(userValue, currentPage);\n\n    if (!response.data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      loader.classList.add('is-hidden');\n      btnLoadMore.classList.add('is-hidden');\n\n      return;\n    }\n\n    const galleryCardTemplate = response.data.hits\n      .map(image => galleryTemplate(image))\n      .join('');\n\n    galleryEl.innerHTML = galleryCardTemplate;\n\n    btnLoadMore.classList.remove('is-hidden');\n\n    simpleLightbox.refresh();\n    searchFormEl.reset();\n  } catch (error) {\n    iziToast.error({\n      message: 'Try again.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n};\n\nconst onBtnLoadMoreClick = async event => {\n  try {\n    currentPage++;\n\n    loader.classList.remove('is-hidden');\n\n    const response = await fetchPhotos(userValue, currentPage);\n\n    const galleryCardTemplate = response.data.hits\n      .map(image => galleryTemplate(image))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n    simpleLightbox.refresh();\n\n    const { height: cardHeight } =\n      galleryEl.firstElementChild.getBoundingClientRect();\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPage >= totalPages) {\n      btnLoadMore.classList.add('is-hidden');\n\n      iziToast.warning({\n        title: Note,\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Try again.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nbtnLoadMore.addEventListener('click', onBtnLoadMoreClick);\n"],"names":["galleryTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchFormEl","galleryEl","loader","btnLoadMore","simpleLightbox","SimpleLightbox","currentPage","userValue","onSearchFormSubmit","event","iziToast","response","galleryCardTemplate","image","onBtnLoadMoreClick","cardHeight","totalPages"],"mappings":"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"}